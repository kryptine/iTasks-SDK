package nl.ru.icis.mbsd.itasks.gin;

import javax.swing.JFrame;

import nl.ru.icis.mbsd.itasks.gin.view.View;

public class Frame extends JFrame implements View {

	private static final long serialVersionUID = -2093219976700939955L;
	
	private Editor editor;
	
	public Frame() {
		super();
        editor = new Editor(this);
        editor.setModule("{\"name\":\"newModule\",\"definitions\":[{\"body\":[\"GGraphExpression\",{\"edges\":[],\"nodes\":[],\"size\":null}],\"declaration\":{\"icon\":\"task\",\"name\":\"newWorkflow\",\"formalParams\":[],\"shape\":\"app:task\",\"returnType\":[\"GTypeApplication\",[\"GConstructor\",\"Task\"],[\"GConstructor\",\"Void\"]]},\"locals\":[]}],\"types\":[],\"imports\":[{\"name\":\"(Clean language)\",\"types\":[{\"name\":\"Bool\",\"rhs\":\"GAbstractTypeRhs\"},{\"name\":\"Char\",\"rhs\":\"GAbstractTypeRhs\"},{\"name\":\"Int\",\"rhs\":\"GAbstractTypeRhs\"},{\"name\":\"Real\",\"rhs\":\"GAbstractTypeRhs\"},{\"name\":\"String\",\"rhs\":\"GAbstractTypeRhs\"},{\"name\":\"Task\",\"rhs\":\"GAbstractTypeRhs\"},{\"name\":\"Void\",\"rhs\":\"GAbstractTypeRhs\"}],\"declarations\":[{\"icon\":\"case\",\"name\":\"case split\",\"formalParams\":[{\"name\":\"a\",\"type\":[\"GTypeVariable\",\"a\"]}],\"shape\":\"embed:rhombus\",\"returnType\":\"GUndefinedTypeExpression\"},{\"icon\":\"merge\",\"name\":\"case merge\",\"formalParams\":[],\"shape\":\"icon:merge\",\"returnType\":\"GUndefinedTypeExpression\"}]},{\"name\":\"CoreCombinators\",\"types\":[],\"declarations\":[{\"icon\":\"return\",\"name\":\"return\",\"formalParams\":[{\"name\":\"a\",\"type\":[\"GTypeVariable\",\"a\"]}],\"shape\":\"embed:ellipse\",\"returnType\":[\"GTypeApplication\",[\"GConstructor\",\"Task\"],[\"GTypeVariable\",\"a\"]]},{\"icon\":\"forever\",\"name\":\"forever\",\"formalParams\":[{\"name\":\"task\",\"type\":[\"GTypeApplication\",[\"GConstructor\",\"Task\"],[\"GTypeVariable\",\"a\"]]}],\"shape\":\"app:task\",\"returnType\":[\"GTypeApplication\",[\"GConstructor\",\"Task\"],[\"GTypeVariable\",\"a\"]]},{\"icon\":\"sequence\",\"name\":\"sequence\",\"formalParams\":[{\"name\":\"label\",\"type\":[\"GConstructor\",\"String\"]},{\"name\":\"task\",\"type\":[\"GList\",[\"GTypeApplication\",[\"GConstructor\",\"Task\"],[\"GTypeVariable\",\"a\"]]]}],\"shape\":\"app:task\",\"returnType\":[\"GTypeApplication\",[\"GConstructor\",\"Task\"],[\"GTypeVariable\",\"a\"]]}]},{\"name\":\"CommonCombinators\",\"types\":[],\"declarations\":[{\"icon\":\"split\",\"name\":\"split\",\"formalParams\":[],\"shape\":\"app:task\",\"returnType\":[\"GTypeApplication\",[\"GConstructor\",\"Task\"],\"GUndefinedTypeExpression\"]},{\"icon\":\"filter\",\"name\":\"first completed\",\"formalParams\":[],\"shape\":\"app:task\",\"returnType\":[\"GTypeApplication\",[\"GConstructor\",\"Task\"],\"GUndefinedTypeExpression\"]},{\"icon\":\"filter\",\"name\":\"filter left\",\"formalParams\":[],\"shape\":\"app:task\",\"returnType\":[\"GTypeApplication\",[\"GConstructor\",\"Task\"],\"GUndefinedTypeExpression\"]},{\"icon\":\"filter\",\"name\":\"filter right\",\"formalParams\":[],\"shape\":\"app:task\",\"returnType\":[\"GTypeApplication\",[\"GConstructor\",\"Task\"],\"GUndefinedTypeExpression\"]},{\"icon\":\"merge\",\"name\":\"merge (list)\",\"formalParams\":[],\"shape\":\"app:task\",\"returnType\":[\"GTypeApplication\",[\"GConstructor\",\"Task\"],\"GUndefinedTypeExpression\"]},{\"icon\":\"merge\",\"name\":\"merge (tuple)\",\"formalParams\":[],\"shape\":\"app:task\",\"returnType\":[\"GTypeApplication\",[\"GConstructor\",\"Task\"],\"GUndefinedTypeExpression\"]}]},{\"name\":\"DateTimeTasks\",\"types\":[{\"name\":\"Time\",\"rhs\":\"GAbstractTypeRhs\"},{\"name\":\"Date\",\"rhs\":\"GAbstractTypeRhs\"},{\"name\":\"DateTime\",\"rhs\":\"GAbstractTypeRhs\"}],\"declarations\":[{\"icon\":\"clock\",\"name\":\"getCurrentTime\",\"formalParams\":[],\"shape\":\"app:task\",\"returnType\":[\"GTypeApplication\",[\"GConstructor\",\"Task\"],[\"GConstructor\",\"Time\"]]},{\"icon\":\"date\",\"name\":\"getCurrentDate\",\"formalParams\":[],\"shape\":\"app:task\",\"returnType\":[\"GTypeApplication\",[\"GConstructor\",\"Task\"],[\"GConstructor\",\"Date\"]]},{\"icon\":\"date\",\"name\":\"getCurrentDateTime\",\"formalParams\":[],\"shape\":\"app:task\",\"returnType\":[\"GTypeApplication\",[\"GConstructor\",\"Task\"],[\"GConstructor\",\"DateTime\"]]},{\"icon\":\"clock_go\",\"name\":\"waitForTime\",\"formalParams\":[{\"name\":\"time\",\"type\":[\"GConstructor\",\"Time\"]}],\"shape\":\"app:task\",\"returnType\":[\"GTypeApplication\",[\"GConstructor\",\"Task\"],[\"GConstructor\",\"Void\"]]},{\"icon\":\"date_go\",\"name\":\"waitForDate\",\"formalParams\":[{\"name\":\"date\",\"type\":[\"GConstructor\",\"Date\"]}],\"shape\":\"app:task\",\"returnType\":[\"GTypeApplication\",[\"GConstructor\",\"Task\"],[\"GConstructor\",\"Void\"]]},{\"icon\":\"clock_go\",\"name\":\"waitForTimer\",\"formalParams\":[{\"name\":\"time\",\"type\":[\"GConstructor\",\"Time\"]}],\"shape\":\"app:task\",\"returnType\":[\"GTypeApplication\",[\"GConstructor\",\"Task\"],[\"GConstructor\",\"Void\"]]}]},{\"name\":\"InteractionTasks\",\"types\":[],\"declarations\":[{\"icon\":\"keyboard\",\"name\":\"enterInformation\",\"formalParams\":[{\"name\":\"description\",\"type\":[\"GTypeVariable\",\"d\"]}],\"shape\":\"app:task\",\"returnType\":[\"GTypeApplication\",[\"GConstructor\",\"Task\"],[\"GTypeVariable\",\"a\"]]},{\"icon\":\"keyboard\",\"name\":\"updateInformation\",\"formalParams\":[{\"name\":\"description\",\"type\":[\"GTypeVariable\",\"d\"]},{\"name\":\"initial\",\"type\":[\"GTypeVariable\",\"a\"]}],\"shape\":\"app:task\",\"returnType\":[\"GTypeApplication\",[\"GConstructor\",\"Task\"],[\"GTypeVariable\",\"a\"]]},{\"icon\":\"choice\",\"name\":\"enterChoice\",\"formalParams\":[{\"name\":\"description\",\"type\":[\"GTypeVariable\",\"d\"]},{\"name\":\"options\",\"type\":[\"GList\",[\"GTypeVariable\",\"a\"]]}],\"shape\":\"app:task\",\"returnType\":[\"GTypeApplication\",[\"GConstructor\",\"Task\"],[\"GTypeVariable\",\"a\"]]},{\"icon\":\"choice\",\"name\":\"updateChoice\",\"formalParams\":[{\"name\":\"description\",\"type\":[\"GTypeVariable\",\"d\"]},{\"name\":\"options\",\"type\":[\"GList\",[\"GTypeVariable\",\"a\"]]},{\"name\":\"index\",\"type\":[\"GConstructor\",\"Int\"]}],\"shape\":\"app:task\",\"returnType\":[\"GTypeApplication\",[\"GConstructor\",\"Task\"],[\"GTypeVariable\",\"a\"]]},{\"icon\":\"information\",\"name\":\"showMessage\",\"formalParams\":[{\"name\":\"message\",\"type\":[\"GTypeVariable\",\"message\"]},{\"name\":\"value\",\"type\":[\"GTypeVariable\",\"a\"]}],\"shape\":\"app:task\",\"returnType\":[\"GTypeApplication\",[\"GConstructor\",\"Task\"],[\"GTypeVariable\",\"a\"]]},{\"icon\":\"information\",\"name\":\"showInstruction\",\"formalParams\":[{\"name\":\"title\",\"type\":[\"GConstructor\",\"String\"]},{\"name\":\"instruction\",\"type\":[\"GTypeVariable\",\"Instruction\"]},{\"name\":\"value\",\"type\":[\"GTypeVariable\",\"a\"]}],\"shape\":\"app:task\",\"returnType\":[\"GTypeApplication\",[\"GConstructor\",\"Task\"],[\"GTypeVariable\",\"a\"]]}]},{\"name\":\"SystemTasks\",\"types\":[{\"name\":\"User\",\"rhs\":\"GAbstractTypeRhs\"},{\"name\":\"UserName\",\"rhs\":\"GAbstractTypeRhs\"}],\"declarations\":[{\"icon\":\"user\",\"name\":\"getCurrentUser\",\"formalParams\":[],\"shape\":\"app:task\",\"returnType\":[\"GTypeApplication\",[\"GConstructor\",\"Task\"],[\"GConstructor\",\"User\"]]},{\"icon\":\"cog\",\"name\":\"getCurrentProcessId\",\"formalParams\":[],\"shape\":\"app:task\",\"returnType\":[\"GTypeApplication\",[\"GConstructor\",\"Task\"],[\"GConstructor\",\"ProcessId\"]]},{\"icon\":\"user\",\"name\":\"getContextWorker\",\"formalParams\":[],\"shape\":\"app:task\",\"returnType\":[\"GTypeApplication\",[\"GConstructor\",\"Task\"],[\"GConstructor\",\"UserName\"]]},{\"icon\":\"user\",\"name\":\"getContextManager\",\"formalParams\":[],\"shape\":\"app:task\",\"returnType\":[\"GTypeApplication\",[\"GConstructor\",\"Task\"],[\"GConstructor\",\"UserName\"]]},{\"icon\":\"page_white\",\"name\":\"getDefaultValue\",\"formalParams\":[],\"shape\":\"app:task\",\"returnType\":[\"GTypeApplication\",[\"GConstructor\",\"Task\"],[\"GTypeVariable\",\"a\"]]}]}]}");
        add(editor);
        setTitle("Gin - a graphical notation for iTasks");
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        setSize(1024, 768);
        setVisible(true);
	}

	/**
	 * @param args
	 */
	public static void main(String[] args) {
		new Frame();
	}

	private int changeCount = 0;
	
	@Override
	public void updateView(Object source) {
		changeCount++;
		System.out.println("Change" + changeCount);
		System.out.println(editor.getModuleJSON());
	}
}
